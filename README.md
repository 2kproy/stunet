# [Stunet.ru](https://stunet.ru/)   

**Stunet** — это проект, вдохновлённый желанием научиться JS и блокировкой Discord в РФ. Он включает серверную часть (Node.js + Express) и фронтенд на базе React. Проект использует систему аутентификации (JWT), обеспечивает работу с каналами (аналог серверов в Discord) и поддерживает базу данных (MongoDB).

## Содержание

- [Функциональность](#Функциональность)
- [Стек технологий](#Стек-технологий)
- [Установка и запуск](#Установка-и-запуск)
  - [Клонирование репозитория](#Клонирование-репозитория)
  - [Настройка бэкенда](#Настройка-бэкенда)
  - [Настройка фронтенда](#Настройка-фронтенда)
- [Переменные окружения](#Переменные-окружения)
- [Скрипты npm](#Скрипты-npm)
- [PM2](#PM2)
- [Авторизация и безопасность](#Авторизация-и-безопасность)
- [Лицензия](#Лицензия)

---

## Функциональность

- **Регистрация и вход** пользователей с хранением паролей в хэшированном виде (bcrypt).
- **Использование JWT** (jsonwebtoken) для аутентификации и защиты роутов.
- **Создание и подключение к «каналам» (Channels).
- **Возможность общения** голосовое подключение mesh-сеть (каждый peer с каждым).
- **Возможность настройки микрофона** Настройка микрофона через стандартный фукционал WebRTC(noiseSuppression+echoCancellation+autoGainControl) + ручная настройка громкости микрофона и его мьют
- **Возможность переписки** сообщения передпются, не хранясь на сервере с помощью Socket.IO.
- **Вариативность базы данных**: PostgreSQL (Sequelize) или MongoDB (Mongoose).

## Стек технологий

- **Node.js**
- **Express**
- **PM2**
- **Sequelize**
- **Socket.IO**
- **MongoDB**
- **Mongoose**
- **bcrypt**
- **jsonwebtoken**
- **Axios**
- **Morgan**
- **dotenv**
- **WebRTC**
---

## Установка и запуск

Ниже описаны общие шаги. При необходимости дополните инструкциями, относящимися к вашему конкретному окружению (Linux, Windows, macOS) и методам деплоя (Docker, Heroku и т. д.).

### Клонирование репозитория

```bash
git clone https://github.com/2kproy/stunet.git
cd stunet
```

### Настройка бэкенда

1. **Перейдите в серверную директорию** (если у вас есть разделение на `server/` и `client/`):

   ```bash
   cd server
   ```

2. **Установите зависимости**:

   ```bash
   npm install
   ```

3. **Создайте или отредактируйте файл `.env`** в корне проекта (или в `server/`), добавив туда нужные переменные окружения (см. [Переменные окружения](#Переменные-окружения)).

4. **Запустите сервер** (локально):

   ```bash
   npm run dev
   ```
   или
   ```bash
   npm start
   ```

   (зависит от того, какой скрипт прописан в `package.json`)

### Настройка фронтенда

1. **Перейдите в директорию фронтенда**:

   ```bash
   cd client
   ```

2. **Установите зависимости**:

   ```bash
   npm install
   ```

3. **Запустите дев-сервер React**:

   ```bash
   npm start
   ```

4. **Откройте** [http://localhost:3000](http://localhost:3000/) для просмотра проекта в браузере.

---

## Переменные окружения

Файл **`.env`** (или переменные окружения в системе) может содержать, например:

```env
DB_HOST=localhost
DB_PORT=1111
DB_NAME=DB_NAME
DB_USER=DB_USER
DB_PASSWORD=DB_PASSWORD

JWT_SECRET=your_jwt_secret
JWT_EXPIRES_IN=1h

PORT=3000
```

- **DB_HOST**, **DB_PORT**, **DB_USER**, **DB_PASSWORD**: Данные для подключения к базе PostgreSQL (или URL для MongoDB).
- **JWT_SECRET**: Секретная строка для подписывания JWT-токенов.
- **PORT**: Порт, на котором будет слушать ваш сервер Express.

---

## Скрипты npm

В `package.json` (бэкенда и/или фронтенда) обычно указаны скрипты:

- **`npm start`**: Запуск приложения в продакшене.
- **`npm run dev`**: Запуск приложения (бэкенда) в режиме разработки (часто через nodemon).
- **`npm run build`** (фронтенд): Сборка React-приложения для деплоя.
- **`npm run lint`**: Линтинг кода (если настроен).
- **...** (другие скрипты при необходимости)

Пример для бэкенда:

```json
{
  "scripts": {
    "start": "node server/index.js",
    "dev": "nodemon server/index.js"
  }
}
```


## PM2

Для продакшн-среды, возможно, используете **PM2**:

1. **Установка pm2 (глобально)**:

   ```bash
   npm install -g pm2
   ```

2. **Запуск приложения через pm2**:

   ```bash
   pm2 start server/index.js --name stunet
   ```

3. **Просмотр логов**:

   ```bash
   pm2 logs stunet
   ```

4. **Перезапуск**:

   ```bash
   pm2 restart stunet
   ```

---

## Авторизация и безопасность

- **JWT**: Используется для аутентификации.  
- **bcrypt**: Хэширование паролей.  
- **CORS**: (опционально) При необходимости настройте [CORS](https://www.npmjs.com/package/cors), если фронтенд и бэкенд работают на разных доменах/портах.  
- **HTTPS**: Для безопасной передачи данных в продакшене используйте SSL-сертификаты (например, через Let’s Encrypt).
